<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Glassmorphism Scientific Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
  <style>
    /* =============== CORE STYLES =============== */
    :root {
      --glass: rgba(255, 255, 255, 0.05);
      --glass-heavy: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.1);
      --accent: #7e00ff;
      --accent-glow: rgba(126, 0, 255, 0.3);
      --danger: #ef4444;
      --bg-dark: #09090b; /* ShadCN Zinc-950 */
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', 'Segoe UI', system-ui, sans-serif; }

    body {
      background: var(--bg-dark);
      background: radial-gradient(circle at top right, #18181b, #09090b);
      height: 100vh;
      display: flex;
      overflow: hidden;
      color: #fafafa;
    }

    /* Background Animation */
    .blob {
      position: absolute;
      filter: blur(100px);
      z-index: 0;
      opacity: 0.3;
      animation: float 20s infinite alternate ease-in-out;
    }
    .blob-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: var(--accent); }
    .blob-2 { bottom: -10%; right: -10%; width: 40vw; height: 40vw; background: #3b82f6; animation-delay: -5s; }

    @keyframes float {
      from { transform: translate(0, 0) scale(1); }
      to { transform: translate(80px, 40px) scale(1.1); }
    }

    /* =============== SIDEBAR =============== */
    #menu-toggle {
      position: fixed; top: 15px; left: 15px; z-index: 1000;
      padding: 10px; cursor: pointer; background: var(--glass);
      backdrop-filter: blur(12px); border-radius: 8px;
      border: 1px solid var(--glass-border); transition: 0.2s;
    }
    #menu-toggle:hover { background: var(--glass-heavy); }

    #sidebar {
      width: 0; height: 100vh; backdrop-filter: blur(24px);
      background: rgba(9, 9, 11, 0.8); border-right: 1px solid var(--glass-border);
      position: fixed; top: 0; left: 0; z-index: 900;
      transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden;
    }
    #sidebar.open { width: 260px; }

    #nav-items { padding: 80px 16px; display: flex; flex-direction: column; gap: 8px; }
    .nav-item {
      padding: 12px 16px; border-radius: 8px;
      cursor: pointer; transition: 0.2s; border: 1px solid transparent;
      white-space: nowrap; color: #a1a1aa; font-size: 0.95rem;
    }
    .nav-item:hover { background: var(--glass); color: #fff; }
    .nav-item.active { background: #27272a; color: #fff; border-color: var(--glass-border); }

    /* =============== MAIN LAYOUT =============== */
    #app {
      flex: 1; display: flex; flex-direction: column;
      padding: 20px; padding-top: 80px; max-width: 800px;
      margin: 0 auto; z-index: 10; height: 100%;
    }

    #display-section {
      background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(20px);
      border-radius: 16px; padding: 30px; margin-bottom: 24px;
      border: 1px solid var(--glass-border); display: flex;
      flex-direction: column; justify-content: flex-end;
      min-height: 160px;
    }
    #display-section.hidden { display: none; }
    #display { font-size: clamp(2.5rem, 8vw, 4.5rem); text-align: right; font-weight: 200; letter-spacing: -2px; overflow-x: auto; white-space: nowrap; }

    /* =============== PANEL GRIDS =============== */
    .panel { display: none; flex: 1; overflow-y: auto; }
    .panel.show { display: flex; flex-direction: column; animation: fadeIn 0.4s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

    .btn-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; flex: 1; }
    .btn-grid button {
      background: var(--glass); backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border); border-radius: 12px;
      color: #fff; font-size: 1.25rem; cursor: pointer; transition: 0.15s;
      display: flex; align-items: center; justify-content: center; min-height: 60px;
    }
    .btn-grid button:hover { background: var(--glass-heavy); border-color: rgba(255,255,255,0.2); }
    .btn-grid .danger { color: var(--danger); }
    .btn-grid .accent { background: var(--accent); color: white; font-weight: 500; }

    .sci-grid { grid-template-columns: repeat(4, 1fr); gap: 8px; }
    .sci-grid button { font-size: 0.95rem; min-height: 52px; }

    /* Special Half-size Button Container */
    .half-btn-container {
      display: flex; gap: 4px; grid-column: span 1;
    }
    .half-btn-container button {
      flex: 1;
      padding: 0;
      min-width: 0;
    }

    /* Trigonometry Tab UI */
    .trig-tab {
        grid-column: span 4;
        margin-bottom: 8px;
    }
    .trig-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        background: var(--glass);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        cursor: pointer;
        transition: 0.2s;
        color: #a1a1aa;
        font-size: 0.9rem;
        font-weight: 500;
    }
    .trig-header:hover { background: var(--glass-heavy); color: #fff; }
    .trig-header i.arrow { transition: transform 0.3s; }
    .trig-header.open i.arrow { transform: rotate(180deg); }

    .trig-content {
        display: none;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        padding-top: 8px;
    }
    .trig-content.show { display: grid; }
    .trig-content button {
        background: rgba(255, 255, 255, 0.03);
        font-size: 0.85rem;
        min-height: 48px;
    }

    /* =============== SHADCN INSPIRED TOOL UI =============== */
    .tool-container {
      background: rgba(255, 255, 255, 0.01); backdrop-filter: blur(30px);
      padding: 32px; border-radius: 16px; border: 1px solid var(--glass-border);
      display: flex; flex-direction: column; gap: 24px;
    }

    .input-group { display: flex; flex-direction: column; gap: 8px; }
    .input-group label { font-size: 0.8rem; font-weight: 500; color: #71717a; text-transform: uppercase; letter-spacing: 0.05em; }
    
    .dual-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

    select, input {
      width: 100%; padding: 12px 16px; background: #09090b;
      border: 1px solid #27272a; border-radius: 8px;
      color: #fafafa; font-size: 0.9rem; outline: none; transition: 0.2s;
      appearance: none;
    }
    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2371717a'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
      background-repeat: no-repeat; background-position: right 12px center; background-size: 16px;
    }
    select:focus, input:focus { border-color: #52525b; box-shadow: 0 0 0 2px rgba(255,255,255,0.05); }

    /* Date Picker Specifics: White Style */
    input[type="date"] {
      background-color: #ffffff;
      color: #09090b;
      font-weight: 500;
      border: 1px solid #e4e4e7;
      color-scheme: light; /* Ensures the browser-provided calendar popup is legible */
    }
    input[type="date"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px var(--accent-glow);
    }
    /* Style the calendar icon for webkit browsers */
    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(0); /* Ensure icon stays dark on light background */
      cursor: pointer;
    }

    .result-card {
      padding: 24px; background: #18181b; border: 1px solid #27272a;
      border-radius: 12px; text-align: center; margin-top: 8px;
    }
    .result-card h2 { font-size: 2rem; color: #fff; margin-top: 4px; font-weight: 600; }
    .result-card p { font-size: 0.85rem; color: #71717a; }

    .calc-btn {
      background: #fafafa; color: #09090b; padding: 14px;
      border: none; border-radius: 8px; font-weight: 600;
      cursor: pointer; font-size: 0.9rem; transition: 0.2s;
    }
    .calc-btn:hover { background: #e4e4e7; transform: translateY(-1px); }

    /* Mobile Responsive */
    @media (max-width: 600px) {
      #app { padding: 12px; padding-top: 75px; }
      .btn-grid { gap: 6px; }
      .btn-grid button { border-radius: 8px; font-size: 1.1rem; min-height: 54px; }
      .dual-inputs { grid-template-columns: 1fr; }
      .tool-container { padding: 20px; }
    }
  </style>
</head>
<body>
  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>

  <div id="menu-toggle"><i class="ri-menu-2-line"></i></div>

  <aside id="sidebar">
    <nav id="nav-items">
      <div class="nav-item active" data-target="panel-calculator">Standard</div>
      <div class="nav-item" data-target="panel-scientific">Scientific</div>
      <div class="nav-item" data-target="panel-converter">Converter</div>
      <div class="nav-item" data-target="panel-date">Date calculation</div>
    </nav>
  </aside>

  <main id="app">
    <section id="display-section">
      <div id="display">0</div>
    </section>

    <!-- Panel: Standard Calculator -->
    <section class="panel show" id="panel-calculator">
      <div class="btn-grid">
        <button data-key="C" class="danger">AC</button>
        <button data-key="(">(</button>
        <button data-key=")">)</button>
        <button data-key="back" class="danger">⌫</button>
        <button data-key="/">÷</button>
        <button data-key="7">7</button><button data-key="8">8</button><button data-key="9">9</button>
        <button data-key="*">×</button>
        <button data-key="4">4</button><button data-key="5">5</button><button data-key="6">6</button>
        <button data-key="-">−</button>
        <button data-key="1">1</button><button data-key="2">2</button><button data-key="3">3</button>
        <button data-key="+">+</button>
        <button data-key="0">0</button>
        <button data-key=".">.</button>
        <button data-key="=" class="accent">=</button>
      </div>
    </section>

    <!-- Panel: Scientific Calculator -->
    <section class="panel" id="panel-scientific">
      <div class="btn-grid sci-grid">
        
        <!-- Trigonometry Tab -->
        <div class="trig-tab">
            <div class="trig-header" id="trig-toggle">
                <span><i class="ri-triangle-line"></i> Trigonometry</span>
                <i class="ri-arrow-down-s-line arrow"></i>
            </div>
            <div class="trig-content" id="trig-panel">
                <button data-key="sin(">sin</button>
                <button data-key="cos(">cos</button>
                <button data-key="tan(">tan</button>
                <button data-key="cosec(">csc</button>
                <button data-key="sec(">sec</button>
                <button data-key="cot(">cot</button>
            </div>
        </div>

        <!-- Row 1 -->
        <button data-key="π">π</button>
        <button data-key="log(">log</button>
        <button data-key="ln(">ln</button>
        <button data-key="√(">√</button>
        
        <!-- Row 2 -->
        <button data-key="^2">x²</button>
        <button data-key="^">xʸ</button>
        <button data-key="!">n!</button>
        <div class="half-btn-container">
          <button data-key="(">(</button>
          <button data-key=")">)</button>
        </div>

        <!-- Row 3 -->
        <button data-key="7">7</button>
        <button data-key="8">8</button>
        <button data-key="9">9</button>
        <button data-key="+" class="accent">+</button>

        <!-- Row 4 -->
        <button data-key="4">4</button>
        <button data-key="5">5</button>
        <button data-key="6">6</button>
        <button data-key="/" class="accent">÷</button>

        <!-- Row 5 -->
        <button data-key="1">1</button>
        <button data-key="2">2</button>
        <button data-key="3">3</button>
        <button data-key="*" class="accent">×</button>

        <!-- Row 6 -->
        <button data-key="C" class="danger">AC</button>
        <button data-key="0">0</button>
        <button data-key="." class="accent">.</button>
        <button data-key="-" class="accent">−</button>

        <!-- Row 7: Special Buttons and Equal -->
        <button data-key="10^">10ˣ</button>
        <button data-key="e">e</button>
        <button data-key="1/">1/x</button>
        <button data-key="=" class="accent">=</button>
      </div>
    </section>

    <!-- Converter & Date Panels -->
    <section class="panel" id="panel-converter">
        <div class="tool-container">
            <div class="input-group">
              <label>Category</label>
              <select id="conv-category">
                <option value="length">Length</option>
                <option value="weight">Weight</option>
                <option value="temperature">Temperature</option>
                <option value="area">Area</option>
                <option value="time">Time</option>
                <option value="volume">Volume</option>
                <option value="energy">Energy</option>
                <option value="speed">Speed</option>
                <option value="power">Power</option>
                <option value="data">Data</option>
                <option value="pressure">Pressure</option>
                <option value="angle">Angle</option>
              </select>
            </div>
            <div class="dual-inputs">
              <div class="input-group">
                <label>From</label>
                <select id="conv-from"></select>
              </div>
              <div class="input-group">
                <label>To</label>
                <select id="conv-to"></select>
              </div>
            </div>
            <div class="input-group">
              <label>Value</label>
              <input type="number" id="conv-value" value="1" step="any">
            </div>
            <div class="result-card">
              <p id="conv-label">Resulting conversion</p>
              <h2 id="conv-result">1.00</h2>
            </div>
          </div>
    </section>

    <section class="panel" id="panel-date">
        <div class="tool-container">
            <div class="dual-inputs">
              <div class="input-group">
                <label>Start Date</label>
                <input type="date" id="date-from">
              </div>
              <div class="input-group">
                <label>End Date</label>
                <input type="date" id="date-to">
              </div>
            </div>
            <button id="date-calc-btn" class="calc-btn">Calculate Duration</button>
            <div class="result-card">
              <p>Total difference</p>
              <h2 id="date-output">-- Days</h2>
            </div>
          </div>
    </section>
  </main>

  <script>
    /* Navigation & Sidebar UI */
    const sidebar = document.getElementById('sidebar');
    const menuToggle = document.getElementById('menu-toggle');
    const displaySection = document.getElementById('display-section');
    const navItems = document.querySelectorAll('.nav-item');
    const panels = document.querySelectorAll('.panel');

    menuToggle.onclick = () => sidebar.classList.toggle('open');

    navItems.forEach(item => {
      item.onclick = () => {
        navItems.forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        const target = item.dataset.target;
        panels.forEach(p => p.classList.remove('show'));
        document.getElementById(target).classList.add('show');
        
        if (target === 'panel-converter' || target === 'panel-date') {
          displaySection.classList.add('hidden');
        } else {
          displaySection.classList.remove('hidden');
        }
        if (window.innerWidth < 800) sidebar.classList.remove('open');
      };
    });

    /* Trig Tab Logic */
    const trigToggle = document.getElementById('trig-toggle');
    const trigPanel = document.getElementById('trig-panel');
    trigToggle.onclick = () => {
        trigToggle.classList.toggle('open');
        trigPanel.classList.toggle('show');
    };

    /* Calculator Logic */
    const display = document.getElementById('display');
    let expr = "";

    const operators = ['+', '-', '*', '/', '.', '^', '^2'];

    document.querySelectorAll('button[data-key]').forEach(btn => {
      btn.onclick = () => {
        const key = btn.dataset.key;
        const lastChar = expr.slice(-1);

        if (key === 'C') {
          expr = "";
        } else if (key === 'back') {
          expr = expr.slice(0, -1);
        } else if (key === '=') {
          try {
            if (!expr) return;
            let processed = expr.replace(/×/g, '*').replace(/÷/g, '/').replace(/π/g, 'Math.PI').replace(/e/g, 'Math.E');
            
            // Standard Trig
            processed = processed.replace(/sin\(/g, 'Math.sin(');
            processed = processed.replace(/cos\(/g, 'Math.cos(');
            processed = processed.replace(/tan\(/g, 'Math.tan(');
            
            // Reciprocal Trig
            processed = processed.replace(/cosec\(/g, '(1/Math.sin(');
            processed = processed.replace(/sec\(/g, '(1/Math.cos(');
            processed = processed.replace(/cot\(/g, '(1/Math.tan(');

            processed = processed.replace(/log\(/g, 'Math.log10(').replace(/ln\(/g, 'Math.log(').replace(/√\(/g, 'Math.sqrt(');
            
            // 10^x and Factorial
            processed = processed.replace(/10\^/g, '10**');
            processed = processed.replace(/(\d+)!/g, (match, n) => {
                let f = 1;
                for (let i = 1; i <= n; i++) f *= i;
                return f;
            });

            const openBrackets = (processed.match(/\(/g) || []).length;
            const closeBrackets = (processed.match(/\)/g) || []).length;
            for(let i = 0; i < (openBrackets - closeBrackets); i++) processed += ')';

            let result = eval(processed);
            expr = Number.isFinite(result) ? parseFloat(result.toFixed(8)).toString() : "Error";
          } catch { expr = "Error"; }
        } 
        else {
          const isCurrentKeyOperator = operators.includes(key);
          const isLastCharOperator = operators.includes(lastChar);

          if (isCurrentKeyOperator && isLastCharOperator) return;
          
          if (key === '^2') expr += "**2";
          else if (key === '^') expr += "**";
          else expr += key;
        }
        
        display.innerText = expr || "0";
      };
    });

    /* Converter Logic */
    const convData = {
      length: { Meters: 1, Kilometers: 1000, Centimeters: 0.01, Millimeters: 0.001, Miles: 1609.34, Feet: 0.3048, Inches: 0.0254 },
      weight: { Kilograms: 1, Grams: 0.001, Milligrams: 0.000001, Pounds: 0.453592, Ounces: 0.0283495 },
      area: { "Sq Meters": 1, "Sq Kilometers": 1000000, Acres: 4046.86, Hectares: 10000, "Sq Feet": 0.0929 },
      time: { Seconds: 1, Minutes: 60, Hours: 3600, Days: 86400, Weeks: 604800 },
      temperature: { Celsius: 'C', Fahrenheit: 'F', Kelvin: 'K' },
      volume: { Liters: 1, Milliliters: 0.001, "Cubic Meters": 1000, Gallons: 3.78541, Quarts: 0.946353, Pints: 0.473176, Cups: 0.236588 },
      energy: { Joules: 1, Kilojoules: 1000, Calories: 4.184, Kilocalories: 4184, "Watt Hours": 3600, "Kilowatt Hours": 3600000, "Electron Volts": 1.60218e-19 },
      speed: { "Meters/sec": 1, "Kilometers/hour": 0.277778, "Miles/hour": 0.44704, Knots: 0.514444, "Feet/sec": 0.3048 },
      power: { Watts: 1, Kilowatts: 1000, Megawatts: 1000000, Horsepower: 745.7, "BTU/hour": 0.293071 },
      data: { Bytes: 1, Kilobytes: 1024, Megabytes: 1048576, Gigabytes: 1073741824, Terabytes: 1099511627776, Bits: 0.125 },
      pressure: { Pascals: 1, Kilopascals: 1000, Bar: 100000, PSI: 6894.76, Atmospheres: 101325, Torr: 133.322 },
      angle: { Degrees: 1, Radians: 57.2958, Gradians: 0.9, Arcminutes: 0.0166667, Arcseconds: 0.000277778 }
    };

    const catSelect = document.getElementById('conv-category');
    const fromSelect = document.getElementById('conv-from');
    const toSelect = document.getElementById('conv-to');
    const valInput = document.getElementById('conv-value');
    const resultH2 = document.getElementById('conv-result');
    const resultP = document.getElementById('conv-label');

    function populateUnits() {
      const cat = catSelect.value;
      fromSelect.innerHTML = toSelect.innerHTML = "";
      Object.keys(convData[cat]).forEach(u => {
        fromSelect.add(new Option(u, u));
        toSelect.add(new Option(u, u));
      });
      if (toSelect.options.length > 1) toSelect.selectedIndex = 1;
      doConvert();
    }

    function doConvert() {
      const cat = catSelect.value;
      const val = parseFloat(valInput.value) || 0;
      const from = fromSelect.value;
      const to = toSelect.value;
      let res = 0;

      if (cat === 'temperature') {
        let c = val;
        if (from === 'Fahrenheit') c = (val - 32) * 5/9;
        else if (from === 'Kelvin') c = val - 273.15;
        res = c;
        if (to === 'Fahrenheit') res = (c * 9/5) + 32;
        else if (to === 'Kelvin') res = c + 273.15;
      } else {
        const base = val * convData[cat][from];
        res = base / convData[cat][to];
      }
      resultP.innerText = `${val} ${from} equals`;
      resultH2.innerText = `${res.toLocaleString(undefined, { maximumFractionDigits: 6 })} ${to}`;
    }

    catSelect.onchange = populateUnits;
    [fromSelect, toSelect, valInput].forEach(el => el.oninput = doConvert);
    populateUnits();

    /* Date Logic */
    document.getElementById('date-calc-btn').onclick = () => {
      const start = new Date(document.getElementById('date-from').value);
      const end = new Date(document.getElementById('date-to').value);
      if (isNaN(start) || isNaN(end)) {
        document.getElementById('date-output').innerText = "Select Dates";
        return;
      }
      const diffTime = Math.abs(end - start);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      document.getElementById('date-output').innerText = `${diffDays} Days`;
    };
    
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('date-from').value = today;
    document.getElementById('date-to').value = today;
  </script>
</body>
</html>
